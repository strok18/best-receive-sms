{include file="../application/best/view/header.html" title="<?php echo $message_heads['title'];?>" description="<?php echo $message_heads['description'];?>" keywords="<?php echo $message_heads['keywords'];?>" /}
<!-- Main content -->
<div class="content">
    <div class="banner">
        <div class="container" style="margin: 30px auto;">
            <div class="row">
                <h1 class="text-center text-uppercase">
                    <?php echo $message_heads['info_top_h1'];?>
                </h1>
                <span>
                    <?php echo $message_heads['info_top_h4'];?>
                </span>
            </div>
        </div>
    </div>
    <div class="container my-3 d-none">
        <img src="" class="img-thumbnail" alt="...">
    </div>
    <div class="phone mt-4">
        <div class="container">
            <div class="row">

                <div class="col-sm-12" id="container-ad">
                    <div class="card text-center border-0 shadow p-3 mb-4 bg-white rounded">
                        <div class="bg-white">

                        </div>
                        <div class="card-body">
                            <div>
                                <a href="{$Request.domain}/{$phone_info['country']['en_title'] | strtolower}-phone-number">
                                    <img src="/static/web/images/flag/{$phone_info['country']['bh']}.svg" width="100px" class="" alt="{$phone_info['country']['en_title']} phone number">
                                </a>
                            </div>
                            <p class="card-text number-font fs-2 mb-0">
                                <span>
                                    <span class="fs-4">+{$phone_info.bh_encryption | raw}</span>
                                    <span>{$phone_info.phone_encryption | raw}</span>
								</span>
                                <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                         fill="currentColor" class="bi bi-clipboard-check copy cursor" viewBox="0 0 16 16" id="copy" onclick="copy()">
                                        <path fill-rule="evenodd"
                                              d="M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
                                        <path
                                                d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                                        <path
                                                d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                                    </svg>
								</span>
                            </p>
                            <div class="">
                                <button type="button" class="btn btn-primary-light text-light mt-1"
                                        onclick="load()" title="{$Think.lang.message_main_button_new_title}">{$Think.lang.message_main_button_new}
                                </button>
                                <button type="button" class="btn btn-primary-light text-light mt-1"
                                        onclick="hot()" title="{$Think.lang.message_main_button_hot_title}">{$Think.lang.message_main_button_hot}
                                </button>
                                <button type="button" class="btn btn-primary-light text-light mt-1"
                                        onclick="random()" title="{$Think.lang.message_main_button_random_title}">{$Think.lang.message_main_button_random}
                                </button>
                            </div>
                            <button type="button" class="btn mt-1 btn-sm text-light"
                                    style="background-color: #C6C7C8;" onclick="report({$phone_info['uid']})" title="{$Think.lang.message_main_button_report_title}">{$Think.lang.message_main_button_report}
                            </button>
                        </div>
                        <div class="bg-white text-muted border-0 text-end text-success">

                        </div>
                    </div>
                </div>
                <!-- Hot number start-->
                <div class="col-sm-12 d-none" id="hot_number">
                    <div class="card text-center border-0 shadow p-3 mb-4 bg-white rounded">
                        <div class="row">
                            {volist name="phone_data" id="vo" empty="$empty"}
                            <div class="col-sm-3">
                                <div class="card text-center border-0 shadow p-3 mb-4 bg-white rounded">
                                    <div class="bg-white d-flex flex-row justify-content-between">
                                        <div class="">
                                            {if $vo.online == 1}
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                 fill="currentColor" class="bi bi-reception-4 text-success"
                                                 viewBox="0 0 16 16">
                                                <path
                                                        d="M0 11.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2zm4-3a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-5zm4-3a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-8zm4-3a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-11z" />
                                            </svg>
                                            {else /}
                                            <span style="color: #8D8D8D"><img height="13px" src="/static/sms/images/offline.png" title="Offline Number"></span>
                                            {/if}

                                        </div>
                                        <div class="">
                                            <p class="card-text little-font text-uppercase" title="{$vo['country']['en_title']} phone number"><a class="click_loading" href="{$Request.domain}/receive-sms-from-{$vo.country.en_title | strtolower}">{$vo['country']['en_title']}</a></p>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <a class="click_loading" href="{$Request.domain}/{$vo.country.en_title | strtolower}-phone-number" title="Receive sms from {$vo['country']['en_title']}">
                                            <img class="country-flag" style="height: 40px;" src="/static/web/images/flag/<?php if($vo['country']['id'] == 11){echo 'Canada';}else{echo $vo['country']['bh'];};?>.svg"
                                                 alt="{$vo['country']['en_title']}{$Think.lang.common_number}">
                                        </a>
                                        <h3 class="card-title number-font" style="margin-top: 5px;">
                                            <a class="click_loading" href="{$Request.domain}/receive-sms-from-{$vo.country.en_title | strtolower}/{$vo.uid}" title="Receive sms {$vo['country']['en_title']}">
                                                <span class="fs-5">{$vo.uid}</span>
                                            </a>
                                        </h3>
                                    </div>
                                    <div class="bg-white text-muted border-0 text-end text-success">

                                    </div>
                                </div>
                            </div>
                            {/volist}
                        </div>
                    </div>
                </div>
                <!-- Hot number end-->

                <div class="col-sm-12">
                    <div class="row mt-3" style="margin-left: 10px;">
                        <nav aria-label="breadcrumb" class="fw-bold">
                            <ol class="breadcrumb">
                                {volist name="bread_crumb" id="vo"}
                                {if $i != count($bread_crumb)}
                                <li class="breadcrumb-item"><a href="{$vo.url}">{$vo.title}</a></li>
                                {else /}
                                <li class="breadcrumb-item active" aria-current="page">{$vo.title}</li>
                                {/if}
                                {/volist}
                            </ol>
                        </nav>
                    </div>
                    <div class="message-card card text-center border-0 shadow mb-4 bg-white rounded">
                        <div class="card-body">
                            <table class="table table-striped table-hover text-start">

                                <thead>
                                {notempty name="data"}
                                <tr>
                                    <th scope="col">{$Think.lang.message_main_table_from}</th>
                                    <th scope="col">{$Think.lang.message_main_table_message}</th>
                                    <th scope="col">{$Think.lang.message_main_table_time}</th>
                                </tr>
                                {/notempty}
                                </thead>
                                <tbody>
                                {volist name="data" id="vo" empty="$empty"}
                                {if $i == 3}
                                    <tr align="center">
                                        <td colspan="3" class="p-0">
                                            {// include file="../application/template/adsense/best-list.html" /}
                                            {include file="../application/template/adsense/best-message-middle-1.html" /}
                                        </td>
                                    </tr>
                                {elseif $i == 11 /}
                                    <tr align="center">
                                        <td colspan="3" class="p-0">
                                            {include file="../application/template/adsense/best-message-middle-2.html" /}
                                        </td>
                                    </tr>
                                {else /}
                                    <tr>
                                        <td class="p-3 align-middle little-font">
                                            <?php if(array_key_exists('url',$vo)){?>
                                            <?php if($vo['url'] !== ''){?>
                                            <a href="/receive-sms-from-{$vo.url}">{$vo.url}</a>
                                            <?php }else{?>
                                            *{$vo.smsNumber|substr=-5}
                                            <?php }?>
                                            <?php }else{?>
                                            *{$vo.smsNumber|substr=-5}
                                            <?php }?>
                                        </td>
                                        <td class="p-3 align-middle text-break">
                                            {if $vo.smsContent == '已屏蔽'}This short message verification code violation, has been blocked.
                                            {else /}<?php echo strip_tags($vo['smsContent'], "<img>") ?>
                                            {/if}
                                        </td>
                                        <td class="p-3 align-middle little-font" style="width: 13%">
                                            {$vo.smsDate}
                                        </td>
                                    </tr>
                                {/if}
                                {/volist}
                                </tbody>
                            </table>
                            <div class="text-start px-2 pb-3">
                                {volist name="country_list" id="country" empty=""}
                                <span class="badge bg-primary link-white"><a href="/{$country | strtolower}-phone-number" title="receive sms from {$country} phone number">{$country}</a></span>
                                {/volist}
                                <span class="badge bg-secondary link-white"><a href="/country" title="more country">More Country</a></span>
                                <br>
                                {volist name = "recommend" id = "re"}
                                <span class="badge bg-success link-white"><a href="/receive-sms-from-{$re}" title="receive sms from tikitok">{$re}</a></span>
                                {/volist}
                                <span class="badge bg-secondary link-white"><a href="/receive-sms-from" title="more country">More Project</a></span>
                            </div>
                        </div>
                        <div class="bg-white text-muted border-0 text-end text-success">

                        </div>
                    </div>
                </div>
                
                <div class="container my-3 d-none">
                    <img src="" class="img-thumbnail" alt="...">
                </div>
                
                <!-- Phone list end -->
                <!-- Page start -->
                <div class="container">
                    <div class="row">
                        <div class="page">
                            {$page|raw}
                        </div>
                    </div>
                </div>
                <!-- Page end-->
            </div>
        </div>
    </div>
</div>
<!-- main content end-->
<script src="/static/web/js/clipboard.min.js" crossorigin="anonymous"></script>
<script>
    function report(phone_num) {
        loadScript(function () {
            let reportHtml = `
                <p>{$Think.lang.message_main_report_content}</p>
            `;
            modal(reportHtml, {title: '{$Think.lang.message_main_report_title}', autoClose: false, size: ''}, function (modal) {
                $.ajax({
                    url: '{:url('/report')}',
                    type: 'post',
                    data: {phone_num: phone_num},
                    beforeSend: function(){
                        $("#confirm").attr('disabled', "disabled")
                        $("#confirm_loading").removeClass('d-none')
                    },
                    success: function (e) {
                        if (e.error_code === 0) {
                            toast(e.msg);
                            modalClose(modal)
                        } else if (e.error_code === 4003){
                            toast(e.msg, {isClose: false, type: 'danger'});
                        } else {
                            toast(e.msg, {type: 'danger'});
                        }
                    },
                    complete: function () {
                        $('#confirm').removeAttr('disabled')
                        $("#confirm_loading").addClass('d-none')
                    }
                })
            })
        })
    }
    function random() {
        loadScript(function () {
            $.ajax({
                url: '{:url('/random')}',
                type: 'post',
                beforeSend: function () {
                  loading();
                },
                success: function (e) {
                    if (e.error_code != 0) {
                        toast(e.msg, {type: 'danger'});
                    } else {
                        window.location.href = e.data;
                    }
                },
                complete: function () {
                    loading(false)
                }
            })
        })
    }
    function load(e) {
        loading();
        /*layer.msg('{$Think.lang.message_js_loading}', {
            time: 0,
            icon: 16,
            shade: 0.05
        })*/
        let urls = window.location.pathname.split('/')
        if (urls.length == 3){
            location.reload(true)
        }else {
            window.location.href = '/'+urls[1]+'/' + urls[2] + '/' + {$phone_info['uid']}
        }
    }
    function hot() {
        let hot = document.getElementById('hot_number');
        if (hot.classList.contains('d-none')){
            hot.classList.remove('d-none');
        }else {
            hot.classList.add('d-none');
        }
    }
    function messageInit(){
        let va = {:json_encode($mClick)};
        if (va.message_click > 5 && va.message_click < 10){
            if (!va.score || va.score < 0.3){
                loadScript(function () {
                    grecaptcha.ready(function() {
                        var renderKey = '6Lf71VQcAAAAAG1lsIdsb3aeTivSf_rkKUKaCu7V'
                        grecaptcha.execute(renderKey, {action: 'message'}).then(function(token) {
                            loadScript(function () {
                                $.ajax({
                                    url: '/recaptcha',
                                    type: 'post',
                                    data: {token:token, page:'check'},
                                    success: function (e) {
                                    }
                                })
                            })
                        })
                    })
                }, 'recaptcha')
            }
        }
        document.getElementById('copy').setAttribute('data-clipboard-text', {$phone_info['phone_num']});
    }
</script>
{include file="../application/best/view/foot.html" /}
